work contentedit span want place posit absolut element line cursor problem happen text get wrap fit first last posit wrap line weird behaviour first posit second line offset getboundingclientrect equal offset first line howev move one place second line offset correctli match second line snippet behaviour display firefox chrome seem work fine although full implement also imprecis behavior abl solv chrome howev firefox last posit first line offset equal first line first posit second line offset equal first line afterward work fine exampl go last place first line notic valu consol say go one place right cursor alreadi next line still say move one right say first diagnosi treatment diagnosi strang behavior occur thank fact chrome firefox seemingli treat differ execut follow snippet chrome firefox differ ad consol output discuss result browser wrap differ posit point look output chrome first note caret jump directli next line actual exist space transform newlin nl seemingli classic carriag return plu line feed form nl chrome see cursor like human eye alreadi line last line first line offset nl offset p offset firefox caret follow space jump next line space sp preserv howev insert newlin includ still treat part line human eye see cursor line firefox line whyever firefox iter twice end line sp nl increment offset sp nl togeth without realli move line yet make thing messi last line first line offset sp nl offset offset treatment way current think detect browser introduc workaround check firefox test still work firefox could bridg problem denot whether let us add global first note one use isnewlin also browser necessari next add keyup handler may extend select direct detect let put everyth togeth follow snippet note domrang resp rect becam let instead const conclus may eleg sophist solut job essenti mod firefox behavior enforc type newlin Ã  la chrome remain differ addit space end line actual wrap firefox still press key twice get next line instead chrome pretti irrelev otherwis behavior browser equival furthermor workaround easili adapt browser necessari acknowledg final spark inspir use variabl came post herrstrietzel also approach consid select direct mous interact discuss explain krokomot firefox quirki way treat line wrap fact end previou line start current line show return charact anchoroffset valu workaround might save last charact index well last top valu global variabl current charact posit previou top equal previou one take posit calcul next charact anchoroffset case line break exampl also check new caret posit base mous input howev approach still fail use arrow key red spot indic nativ caret posit ca fix green bar repres fix offset includ select direct forward backward also check key input like arrowleft arrowup adjust caret posit pretti clunki way get decent support navig exampl also includ firefox user detect suggest krokomot