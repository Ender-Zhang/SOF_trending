write program gate count allow peopl build follow solut use synchron howev someon mention solut allow sequenti lock fair peopl line rewrit allow semaphor correct use synchron use semaphor semaphor version almost quit synchron version semaphor version thread safe suggest two chang reason thread execut statement thread b could slip decrement old semaphor thread semaphor new semaphor assign take effect would allow five call next time messag print need creat new semaphor releas call allow five call acquir permit reason final mostli make sure everybodi read code immedi understand semaphor alway refer object updat howev someon mention synchron solut allow sequenti lock fair peopl line ca even guess mean ask someon clariti synchron version addtolin print messag everi fifth call anyth els make caller wait longer take caller print messag unfair titl question program allow peopl gate noth realli model gate noth make person wait gate open liter method print certain messag everi fifth call