consid follow snippet creat typevar hint f expect input float array return output type type hint g loos expect either float array return float array without constrain type output type input intuit setup make sens insid definit g function know expect x either float array f expect input howev pass x f last line pyright complain argument type float ndarray unknown unknown assign paramet x type f function f type float ndarray unknown unknown incompat constrain type variabl surpris frustrat mean one use function f without cautiou way write type hint thought solv edit comment recreat essenti exampl depend numpi instead numpi array use fraction pyright report essenti issu argument type float fraction assign paramet x type f function f type float fraction incompat constrain type variabl interestingli instead fraction use int type check pass type var type union incompat python issu type variabl defin typevar float fraction constrain float fraction f x accept instanc float fraction union float fraction exampl reduc follow pyright playground mypi playground exactli know f g need still requir type constraint infer return type f upcast exactli one float fraction float fraction need add union addit constraint requir type constraint set upper bound easier desir solut resolv error repeat call f g explicit type guard output use pyright