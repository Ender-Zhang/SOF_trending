want implement optimist lock project concurr request use java spring jooq read document found jooq support optimist lock box decid implement want use jooq record jdbctemplat adept realli love way write persist layer result expand tabl version column updat entiti check version differ increment version main problem understand work except correctli updat want understand went wrong find entiti version differ someth like updat method case ca understand went wrong entiti id version defer would greatli appreci advic guidanc implement function correctli jooq optimist lock implement distinguish two case distinct relev would hard get right singl queri without pessimist lock irrelev given assumpt pass around random id id must exist point reason exist anymor someon delet record henc anoth case optimist lock rais someexcept much differ version chang