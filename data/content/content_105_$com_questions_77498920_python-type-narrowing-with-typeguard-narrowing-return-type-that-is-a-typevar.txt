Consider the following case: At the point of return in process_str_int I get an error in pyright complaining that 'Expression of type "str" cannot be assigned to return type "_T@process_list"' (and similarly for the int case). The python interpreter is python 3.9 This does not happen with isinstance, where the TypeVar is correctly narrowed down and thus the correct return type is inferred and matched against the return value How can I acheive a similar behaviour using custom type guards?