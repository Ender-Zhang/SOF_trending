I'm using Azure Machine Learning v2 SDK to create a model deployment on a kubernetes compute attached to an AML workspace. I'm able to deploy it locally as part of testing before deploying online. However, when tried to deploy online using KubernetesOnlineDeplyoment , I received DeploymentIdentityError: Failed to create Kubernetes deployment identity, Reason:RefreshExtensionIdentityNotSet . (More detailed error below) I'm provisioned the AKS cluster using terraform. I referred this official tutorial notebook as well. I've tried the local deployment flow mentioned in the tutorial and it works fine. In the tutorial, section 4.3 Attach Arc Cluster, I modified the compute_params dict to include identity as well. Below is the code I used to attach the cluster: Below is how I'm creating an endpoint first: Then I created the deployment object, Finally, it's the below line that causes the issue: The Error: Regarding the error, quoting the official documentation : ERROR: RefreshExtensionIdentityNotSet
This error occurs when the extension is installed but the extension identity is not correctly assigned. You can try to reinstall the extension to fix it. I tried re-installing the extension and deploying but got the same error.