I'm working on a reactive application using Hibernate Reactive with Panache and am trying to implement a repository-service-rest-controller architecture.
Here's my rest-controller method: This controller calls the following service method: And the service, in turn, calls this repository method: This code worked flawlessly in Quarkus version 2.16.7.Final. However, after updating to 3.4.3, I'm encountering this error: The migration guide for version 3.0 ( https://github.com/quarkusio/quarkus/wiki/Migration-Guide-3.0#hibernate-reactive-panache ) mentions that in some cases, the session is automatically opened on demand, especially when a Panache entity method is invoked in a JAX-RS resource method in an application with the quarkus-resteasy-reactive extension. But in other cases, it's not as clear. Why is this happening? Both the service and the repository should be called within the JAX-RS context. If I move all the logic from the service to the controller and eliminate the service, the code works without errors. It seems that the context is somehow lost when the service is involved. If the code is left as is and the @WithSession annotation is added to the repository method, it will also work. Has anyone faced this issue and found a solution? I couldn't find relevant examples in the official documentation.