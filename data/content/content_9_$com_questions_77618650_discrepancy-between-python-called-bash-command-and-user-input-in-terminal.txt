I am encountering a weird issue. I will try to be as clear as possible. Basically, I am trying to automate a task that I can do through command in the terminal, but using python. When I do it through the terminal, the basic step is that I launch a simulation (through OpenFOAM but that is not the issue here) via a bash command, and I stop the simulation by modifying a text file and saving it. To automate the task, I made two python functions.
The first ones simply call the same command I use by hand, with subprocess.Popen.
The second one simply modifies the file to stop the simulation. When I do it by hand, it works well.
But when I do it with python, the solution does not stop even though the file is indeed modified. After troubleshooting I noticed that when I launch the command by hand, and have the python function stop the simulation (modify the text file), it works.
But the opposite does not. If I launch the simulation through subprocess.Popen and then modify the file by hand, it does not stop. So the issue seems to arise from that side. Also, the kill and terminate methods on the process have no effects whatsoever. Any idea why such thing can happen? Thanks! EDIT: Basic code sample used for python. To Launch the command: To modify the file: When you start the simulation with Python, make sure you wait for it to fully start before trying to stop it by modifying the file. Timing matters here; altering the file should happen after the simulation is up and running. This might require checking the simulation's status or adding a pause to ensure the file change occurs at the right time. Alright, thanks all for your help.
It turns out the issue was with OpenFOAM that has a setting to only check the file modification every 5s.
If anyone encounter the same issue, you can find the solution here : https://www.cfd-online.com/Forums/openfoam/128671-controldict-endtime-not-updated-using-runtimemodifiable.html