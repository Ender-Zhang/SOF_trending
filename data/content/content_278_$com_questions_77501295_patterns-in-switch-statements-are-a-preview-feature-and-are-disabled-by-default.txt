I am working on moving some projects from java 11 to java 17 and from Spring Boot 2.7.8 to Spring Boot 3.0.0. I have the following method in a test class: when working with java 11, but when I switched to java 17 and in the pom.xml the following was specified: and The code stopped working with the following error: Obviously it interferes with the pattern matching preview feature in java 17. What is the right solution for this? The type HttpMethod has been changed from an enum type to a non- enum type . Therefore, you can’t switch over it anymore. The error message is confusing, because you can switch over non- enum types with pattern matching, so the compiler assumes that you’re trying that. An alternative is to switch over the string representation instead. This is also an opportunity to clean up this code: