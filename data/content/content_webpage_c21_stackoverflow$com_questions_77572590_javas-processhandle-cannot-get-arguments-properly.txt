I have encountered into this problem while writing a minecraft mod. Environment: MacOS
JVM: Reproduce: Then execute this command: The output is "none". Update : I found that if there is a $ in arguments, java failed to get command line, e.g. $a , ${a} . Is this a bug of java? According to ProcessHandle.Info's javadoc this class is implementation and platform specific. It does not garantee the results you expect. Check this out: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/ProcessHandle.Info.html Also check 'API Note' for commandLine() and argument() methods If you're limited with OS choice you can try other vendors of jdks. Btw your code works as expected in linux. I've checked it in docker container with Debian 12 and Corretto 11 jdk. There are some examples of how $ character may affect command interpretation by shell and commandLine method output accordingly.